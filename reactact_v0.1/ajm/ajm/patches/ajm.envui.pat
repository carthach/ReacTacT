max v2;#N vpatcher 122 365 684 776;#P origin -550 40;#P window setfont "Sans Serif" 9.;#P hidden newex 262 260 27 196617 + 1;#P hidden newex 280 125 27 196617 t i i;#P hidden newex 142 310 58 196617 switch 2 1;#P hidden newex 40 309 58 196617 switch 2 1;#P hidden newex 280 160 55 196617 select 0 1;#N comlet release (line format);#P hidden outlet 142 333 15 0;#N comlet sustain (1/0 = on/off);#P hidden outlet 191 373 15 0;#P hidden newex 280 104 125 196617 pattr uitype @bindto type;#X prestore 1 0 0;#P objectname uitype;#P hidden newex 302 231 203 196617 pattr funcsustain @bindto env::funcsustain;#X prestore 1 0 1;#P objectname funcsustain;#P hidden newex 301 281 191 196617 pattr mssustain @bindto env::mssustain;#X prestore 1 0 1;#P objectname mssustain;#P hidden newex 301 259 199 196617 pattr multislider @bindto env::multislider;#X prestore 63 0 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.;#X prestore 63 41 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.;#P objectname multislider;#P comment 184 59 22 196617 ms;#N vpatcher 629 249 1180 568;#P origin 0 13;#P window setfont "Sans Serif" 9.;#P window linecount 2;#P comment 337 158 100 196617 2 numbers for each point;#P window linecount 1;#P newex 306 189 27 196617 + 2;#P window linecount 3;#P newex 306 163 27 196617 * 2;#P window linecount 1;#P newex 322 96 27 196617 t b i;#P window linecount 0;#P newex 92 50 27 196617 t b i;#P newex 415 40 27 196617 t b i;#P window linecount 1;#N vpatcher 30 89 219 388;#P window setfont "Sans Serif" 9.;#P window linecount 2;#P comment 115 13 45 196617 sustain on/off;#P window linecount 1;#P comment 1 25 46 196617 onchange;#P window linecount 3;#P comment 57 2 38 196617 sustain point index;#P window linecount 0;#P newex 121 61 27 196617 t b i;#P newex 60 64 27 196617 t b i;#P newex 54 199 30 196617 pack;#P message 54 222 72 196617 sustain \$1 \$2;#P newex 74 175 35 196617 && 1;#P newex 74 148 31 196617 == 1;#P newex 54 123 27 196617 - 1;#P newex 24 102 40 196617 uzi 7;#N comlet sustain point;#P inlet 60 41 15 0;#N comlet sustain on/off;#P inlet 121 40 15 0;#N comlet bang to update;#P inlet 24 41 15 0;#P outlet 54 242 15 0;#P connect 1 0 4 0;#P fasten 10 0 4 0 65 88 29 88;#P connect 11 0 4 0;#P connect 4 2 5 0;#P connect 5 0 9 0;#P connect 9 0 8 0;#P connect 8 0 0 0;#P connect 3 0 10 0;#P fasten 5 0 6 0 59 144 79 144;#P connect 6 0 7 0;#P connect 7 0 9 1;#P fasten 10 1 6 1 82 101 100 101;#P fasten 11 1 7 1 143 169 104 169;#P connect 2 0 11 0;#P pop;#P newobj 282 130 124 196617 p sustain-points;#P newex 51 162 46 196617 zl group;#P newex 164 176 29 196617 gate;#P newex 162 131 88 196617 t b next b;#P newex 51 188 93 196617 zl slice 8;#P newex 219 96 30 196617 t b b;#P newex 432 69 93 196617 prepend setdomain;#N comlet duration;#P inlet 415 21 15 0;#N comlet sustain (1/0 = on/off);#P inlet 15 25 15 0;#N comlet sustain index;#P inlet 322 76 15 0;#N comlet onchange;#P inlet 219 76 15 0;#N comlet function line output (2nd outlet);#P inlet 51 57 15 0;#N comlet attack;#P outlet 51 210 15 0;#N comlet;#P outlet 12 261 15 0;#N comlet release;#P outlet 134 210 15 0;#P window linecount 3;#P comment 174 195 63 196617 Send "next" when sustaining;#P comment 29 255 75 196617 to function (bang/next to get points);#P window linecount 6;#P comment 13 151 33 196617 Split into attack and release;#P window linecount 3;#P comment 18 71 37 196617 get points here;#P window linecount 1;#P comment 32 26 80 196617 sustain on/off;#P comment 238 76 46 196617 onchange;#P comment 438 23 49 196617 duration;#P window linecount 3;#P comment 348 83 38 196617 sustain point index;#P window linecount 0;#P comment 338 190 100 196617 the first point (0 \, 0) is index 0 and is always part of the attack;#P fasten 17 0 10 0 437 241 17 241;#P fasten 23 0 10 0 287 241 17 241;#P fasten 20 2 10 0 245 241 17 241;#P fasten 21 0 10 0 169 241 17 241;#P fasten 20 0 22 0 167 153 56 153;#P connect 12 0 22 0;#P connect 22 0 19 0;#P connect 19 0 11 0;#P fasten 15 0 25 0 20 45 97 45;#P connect 28 0 19 1;#P connect 19 1 9 0;#P fasten 25 0 20 0 97 123 167 123;#P lcolor 7;#P fasten 18 0 20 0 224 123 167 123;#P lcolor 7;#P fasten 24 0 20 0 420 60 213 60 188 86;#P lcolor 7;#P connect 26 0 20 0;#P lcolor 7;#P connect 25 1 21 0;#P connect 20 1 21 1;#P connect 13 0 18 0;#P fasten 18 1 23 0 244 121 287 121;#P connect 26 1 27 0;#P connect 27 0 28 0;#P connect 14 0 26 0;#P connect 26 1 23 1;#P fasten 25 1 23 2 114 71 401 71;#P connect 16 0 24 0;#P connect 24 1 17 0;#P pop;#P hidden newobj -23 203 132 196617 p function-adapter;#N vpatcher 803 381 1207 717;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 236 94 27 196617 t b i;#P newex 34 131 64 196617 speedlim 80;#P newex 34 157 27 196617 t b i;#P newex 51 196 27 196617 * 2;#P newex 76 239 42 196617 zl slice;#P newex 140 109 27 196617 t b l;#P newex 236 125 34 196617 / 64.;#P newex 157 130 49 196617 append 0;#P newex 236 148 62 196617 prepend set;#P newex 157 179 49 196617 append 1;#P newex 157 153 25 196617 iter;#P newex 157 203 46 196617 zl group;#P window linecount 4;#P comment 168 80 58 196617 append 0 ensures the envelope will end;#P window linecount 2;#P comment 272 90 100 196617 This needs to be the number of sliders+1;#N comlet;#P inlet 8 24 15 0;#N comlet sustain index;#P inlet 144 52 15 0;#N comlet;#P inlet 60 68 15 0;#N comlet attack;#P outlet 76 261 15 0;#N comlet release;#P outlet 108 261 15 0;#N comlet to multislider;#P outlet 174 300 15 0;#P comment 196 301 62 196617 to multislider;#P window linecount 1;#P comment 31 23 51 196617 duration;#P window linecount 2;#P comment 163 54 61 196617 sustain index;#P window linecount 3;#P comment 19 51 56 196617 multislider list of values;#P connect 8 0 22 0;#P connect 22 0 21 0;#P connect 21 1 20 0;#P connect 12 0 19 0;#P connect 19 0 6 0;#P connect 20 0 19 1;#P connect 19 1 5 0;#P connect 7 0 18 0;#P connect 18 1 16 0;#P connect 16 0 13 0;#P connect 13 0 14 0;#P fasten 15 0 14 0 241 173 162 173;#P fasten 18 0 12 0 145 199 162 199;#P connect 14 0 12 0;#P fasten 23 0 4 0 241 116 314 116 314 289 179 289;#P fasten 21 0 4 0 39 289 179 289;#P fasten 9 0 23 0 13 43 241 43;#P connect 23 1 17 0;#P connect 17 0 15 0;#P pop;#P hidden newobj 153 208 106 196617 p multislider-adapter;#P user ubumenu 16 2 100 196617 0 1 1 0;#X add breakpoint;#X add draw;#X prefix_set 0 0 <none> 0;#P objectname type;#P hidden newex 301 207 173 196617 pattr function @bindto env::function;#X prestore 24 0 1000. 0. 1. 0. 0. 1 228.813553 0.912281 0 381.355988 0.545455 0 491.525421 0.631579 0 576.271179 0.192982 0 694.915283 0.070175 0 1000. 0. 1;#P objectname function;#N comlet attack (line format);#P hidden outlet 40 331 15 0;#P hidden newex 97 171 64 196617 speedlim 80;#P window linecount 2;#P hidden newex 97 136 89 196617 pattr duration @bindto ui.envdur;#X prestore 1 0 1000;#P objectname duration;#P hidden newex -138 84 87 196617 pattr sustain @bindto ui.sustain;#X prestore 1 0 0;#P objectname sustain;#P toggle 149 93 15 0;#P objectname ui.sustain;#P number 149 56 35 9 20 5000 3 3 0 0 0 221 221 221 222 222 222 0 0 0;#P objectname ui.envdur;#P comment 147 30 46 196617 Envelope Duration;#P window linecount 1;#P comment 164 95 42 196617 Sustain;#P bpatcher 7 26 130 87 0 0 ajm.envui-helper.pat 0;#P objectname env;#P user panel 2 22 140 96;#X brgb 124 124 124;#X frgb 0 0 0;#X border 1;#X rounded 10;#X shadow 2;#X done;#P hidden connect 6 0 13 0;#P hidden fasten 13 0 1 0 -18 228 -42 228 -42 19 12 19;#P hidden connect 1 0 13 1;#P hidden connect 21 0 13 2;#P hidden connect 1 1 13 2;#P hidden connect 25 0 22 0;#P hidden connect 22 0 9 0;#P hidden connect 13 1 22 1;#P hidden connect 21 1 1 1;#P hidden fasten 12 2 1 1 254 229 269 229 269 20 72 20;#P hidden connect 1 2 13 3;#P hidden connect 12 0 22 2;#P hidden connect 7 0 8 0;#P hidden connect 8 0 13 4;#P hidden connect 11 0 1 2;#P hidden connect 25 0 23 0;#P hidden connect 23 0 20 0;#P hidden fasten 8 0 12 0 102 196 158 196;#P hidden connect 13 2 23 1;#P hidden connect 12 1 23 2;#P hidden fasten 6 0 19 0 -133 360 196 360;#P hidden fasten 1 3 12 1 102 128 206 128;#P hidden fasten 1 4 12 2 132 121 254 121;#P hidden connect 24 1 25 0;#P hidden connect 18 0 24 0;#P hidden connect 24 0 21 0;#P pop;